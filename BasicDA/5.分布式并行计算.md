# 分布式计算与并行计算

## 概述

### 分布式计算概述

> 分布式系统： 通过网络互联，可协作执行某个任务的独立计算机集合。

从硬件角度来讲，每台计算机都是自主的。从软件角度来讲，用户将整个系统看作一台计算机。计算机之间通过网络传递消息与通信，从而完成一个共同的目标。


> 分布式计算：在分布式系统上执行的计算， 把需要进行大量计算的工程数据分割成小块， 由许多台计算机分别计算， 再上传计算结果后把这些计算结果综合起来得到的最终结果。

分布式计算的分类
- 传统C/S模型：客户端向服务器发送请求， 服务器处理请求，并把结果返回给客户端。
- 集群技术
  - 把多台服务器连接起来， 当成一台服务器来用
  - 对客户来说是透明的，对服务器软件来说也是透明的
- 通用型分布式计算机环境
  - 具有网络透明性
  - 跨进程的调用，速度可能会降低一个数量级
  - 跨机器的调用，速度可能会降低两个数量级

分布式计算的相关计算形式
- 单机计算
- 并行计算： 采用多个计算机来执行单个指令。
- 网络计算
- 网格计算： 利用互联网将地理上分隔的资源联系到一起形成一台逻辑上的计算机。
- 云计算

分布式计算的特点
- 优点
  - 低廉的计算机价格和网络访问的可用性
  - 资源共享
  - 可伸缩性
  - 容错性
- 缺点
  - 多点故障
  - 安全性低
  - 网络基础设施成本太高

### 并行计算

> 同时使用多种计算资源解决计算问题， 提高计算机系统计算速度和处理能力， 基本思想是用多个处理器来协同求解同一问题。 并行计算系统既可以是专门设计的，含有多个处理器的超级计算机。

时间上的并行性：流水线技术

空间上的并行性：多处理机并发的执行计算。

并行计算的特征
- 将工作分离成离散的部分，有助于同时解决。
- 随时并及时地执行多个指令程序
- 多计算资源下解决问题的耗时要少于单个计算资源下的耗时

并行计算的优点
- 节约时间和成本
- 解决更大规模更复杂的问题
- 提供并发性
- 充分利用非局部的资源
- 更好地利用并行硬件。

并行计算内存框架
- 共享内存： 所有处理器以全局寻址的方式访问所有的内存空间。
- 分布式内存
  - 每个处理器都有对应的内存
  - 不存在各个处理器所共享的全局内存地址？？？
- 混合式分布-共享内存
  - 每个节点只知道自己的内存
  - 需要在不同的机器上通过网路进行数据通信。

并行计算模型
- 共享内存模型（无线程）
- 线程模型
- 分布式内存/消息传递模型
- 数据并行模型
- 混合模型
- 单程序多数据模型
- 多程序多数据模型

分布式并行计算框架
- hadoop
- storm
- spark

## MapReduce 框架

### 概述

> MapReduce 是一个基于集群的高性能并行计算平台，一个并行计算软件架构，一个并行程序设计模型与方法。

MapReduce特点
- 优点：
  - 易于编程
  - 良好的扩展性
  - 高容错性
  - 适合海量数据的离线处理
- 缺点
  - 延迟性， 无法满足毫秒级过秒级应用的要求
  - 不适合多个具有依赖关系的任务执行。

### MapReduce 架构

V1 架构
- Client
- JobTracker
- TaskTracker
- Task

存在问题：
- JobTracker单点故障
- JobTracker任务过重
- 资源利用率低
- 无法支持多种计算框架


V2 架构
- ResourceManager
- NodeManager
- ApplicatuinMaseter
- Containner

MapReduce 计算模型
- 数据输入： 对输入的 Hdfs 任务进行分片。
- Map任务
- Shuffle任务
- Reduce任务
- 结果输出

## MapReduce 编程模型

### 编程模型

Map
- 读取输入数据
- 输出一组键值对
- 输出结果作为中间结果

Reduce
- 读取中间结果
- 按键分组合并
- 输出一组最终结果


### 编程组件

too much to note....

Mapper

Reduce

Shuffle



## MapReduce 操作示例

## Spark概述

Spark 的计算结果存放在内存中

特点
- 运行速度快： 使用DAG 有向无关图执行引擎以循环支持数据流与内存计算
- 容易使用： 支持使用多种语言进行编程，可以通过Spark Shell 进行交互式编程
- 通用性： Spark提供了完整而强大的技术栈
- 运行模式多样性： 运行于独立的集群模式中，可运行于Hadoop中，也可运行与云环境中

数据处理包含的类型：
- 复杂的批量数据处理：通常时间跨度在数十分钟到数小时之间
- 基于历史数据的交互式查询： 通常书简跨度在数十秒到数分钟之间
- 基于实时数据流的数据处理： 通常时间跨度在数百毫秒到数秒之间

## Spark架构

Spark架构
- 任务控制节点 Driver Program
- 集群资源管理器 Cluster Manager
  - Saprk on YARN
  - Spark on Mesos
  - Standalone
  - Local
- 工作节点
  - Exector Task


[返回](../index.md)











